generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
}


model Tenant {
  id        String    @id @default(cuid())
  name      String
  accounts  Account[]
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

model Account {
  id        String    @id @default(cuid())
  name      String
  tenantId  String
  tenant    Tenant    @relation(fields: [tenantId], references: [id])
  buckets   Bucket[]
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

model Bucket {
  id        String       @id @default(cuid())
  name      String
  region    String
  accountId String
  account   Account      @relation(fields: [accountId], references: [id])
  objects   FileObject[]
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
}

model FileObject {
  id        String       @id @default(cuid())
  name      String
  key       String       
  isFolder  Boolean      @default(false)
  size      Int?
  mimeType  String?
  bucketId  String
  bucket    Bucket       @relation(fields: [bucketId], references: [id])
  parentId  String?
  parent    FileObject?  @relation("ParentChild", fields: [parentId], references: [id])
  children  FileObject[] @relation("ParentChild")
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
}
